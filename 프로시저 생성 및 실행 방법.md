# 프로시저 생성 및 실행 방법

```sql
-- 프로시저 생성
CREATE OR REPLACE PROCEDURE ADD_EMPLOYEE 
(
	P_FIRST_NAME IN VARCHAR2,
	P_LAST_NAME IN VARCHAR2,
	P_DEPARTMENT_ID IN NUMBER,
	P_HIRE_DATE IN DATE,
	P_SALARY IN NUMBER,
	P_MANAGER_ID IN NUMBER DEFAULT NULL
) 
IS 
	V_DEPARTMENT_COUNT NUMBER;
BEGIN 
	-- Check if the department exists
	SELECT COUNT(*) INTO V_DEPARTMENT_COUNT
    FROM DEPARTMENTS
    WHERE DEPARTMENT_ID = P_DEPARTMENT_ID;
	
	IF V_DEPARTMENT_COUNT = 0 THEN
		RAISE_APPLICATION_ERROR(-20001, 'Department does not exist.');
	END IF;

    -- Insert the new employee
    INSERT INTO EMPLOYEES (EMP_ID, FIRST_NAME, LAST_NAME, DEPARTMENT_ID, HIRE_DATE, SALARY, MANAGER_ID)
    VALUES (EMPLOYEES_SEQ.NEXTVAL, P_FIRST_NAME, P_LAST_NAME, P_DEPARTMENT_ID, P_HIRE_DATE, P_SALARY, P_MANAGER_ID);

    COMMIT;
EXCEPTION
    WHEN OTHERS THEN
        ROLLBACK;
        RAISE_APPLICATION_ERROR(-20002, 'An error occurred while adding the employee: ' || SQLERRM);
END ADD_EMPLOYEE;

SELECT EMPLOYEES_SEQ.NEXTVAL FROM DUAL;

-- 프로시저 호출
CALL ADD_EMPLOYEE('John', 'Doe', 1, SYSDATE, 5000, NULL);
```
